{"version":3,"file":"pomskyFindWorker-d7827622.js","sources":["../src/editors/pomskyFindWorker.ts"],"sourcesContent":["import type { FindMessage } from './workers'\n\nself.onmessage = ({ data }: MessageEvent<FindMessage>) => {\n  try {\n    const output = search(data)\n    self.postMessage({ output })\n  } catch (e) {\n    self.postMessage({ error: e instanceof Error ? e.message : 'Searching failed or timed out' })\n  }\n}\n\nfunction search({ regex, haystack, ignoreCase, limit = Infinity }: FindMessage): RegExpExecArray[] {\n  const compiled = new RegExp(regex, ignoreCase ? 'giu' : 'gu')\n\n  const results: RegExpExecArray[] = []\n  let _res: RegExpExecArray | null\n  let prevLastIndex = 0\n\n  while (limit-- > 0 && (_res = compiled.exec(haystack)) != null) {\n    results.push(_res)\n    if (compiled.lastIndex === prevLastIndex) {\n      compiled.lastIndex++\n    }\n    prevLastIndex = compiled.lastIndex\n  }\n\n  return results\n}\n"],"names":["data","output","search","regex","haystack","ignoreCase","limit","compiled","results","_res","prevLastIndex"],"mappings":"yBAEA,KAAK,UAAY,CAAC,CAAE,KAAAA,KAAsC,CACpD,GAAA,CACI,MAAAC,EAASC,EAAOF,CAAI,EACrB,KAAA,YAAY,CAAE,OAAAC,CAAA,CAAQ,QACpB,EAAG,CACL,KAAA,YAAY,CAAE,MAAO,aAAa,MAAQ,EAAE,QAAU,gCAAiC,CAC9F,CACF,EAEA,SAASC,EAAO,CAAE,MAAAC,EAAO,SAAAC,EAAU,WAAAC,EAAY,MAAAC,EAAQ,KAA4C,CACjG,MAAMC,EAAW,IAAI,OAAOJ,EAAOE,EAAa,MAAQ,IAAI,EAEtDG,EAA6B,CAAA,EAC/B,IAAAC,EACAC,EAAgB,EAEpB,KAAOJ,KAAU,IAAMG,EAAOF,EAAS,KAAKH,CAAQ,IAAM,MACxDI,EAAQ,KAAKC,CAAI,EACbF,EAAS,YAAcG,GAChBH,EAAA,YAEXG,EAAgBH,EAAS,UAGpB,OAAAC,CACT"}